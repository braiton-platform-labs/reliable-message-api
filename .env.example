# Template for local dev ONLY.
#
# - This file is safe to commit because it contains only placeholders.
# - Never commit real secrets. The real `.env` is gitignored.
# - Recommended: generate a secure local `.env` automatically with:
#     make dev-env-init
#
# Used by `make dev-secrets-apply` to create/update the Kubernetes Secret `dev/app-secrets`.

# Postgres (used by the API and by Kong)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change-me
POSTGRES_DB=messages

# Kong uses the same Postgres instance (DB=kong) in local dev.
KONG_PG_PASSWORD=change-me

DATABASE_URL=postgresql+psycopg2://postgres:change-me@postgres:5432/messages

# Optional API auth (defense-in-depth). If enabled, every request must send X-API-Key.
REQUIRE_API_KEY=false
API_KEY=change-me

METRICS_ENABLED=true
STATS_ENABLED=true
IDEMPOTENCY_TTL_HOURS=24

# Datadog (optional)
DD_SERVICE=reliable-message-api
DD_ENV=local
DD_VERSION=0.1.0
DD_AGENT_HOST=
DD_TRACE_AGENT_URL=
DD_API_KEY=

# Kong Manager / Admin API
KONG_ADMIN_GUI_USER=admin
KONG_ADMIN_GUI_PASSWORD=change-me
KONG_ADMIN_TOKEN=change-me
# Must be compact JSON (no spaces) to work well with `kubectl --from-env-file`.
KONG_ADMIN_GUI_SESSION_CONF={"secret":"change-me","storage":"kong","cookie_secure":false}
# Comma-separated list of "user:password" pairs. Example: "alice:pass,bob:pass".
KONG_RBAC_USERS=
